#!/bin/bash

# Setup variables for platform independence and host specificity
export OS=`uname -s`
# host=`hostname | cut -d. -f1`

# Find distribution name and set it as global
export DISTNAME=`lsb_release -d | sed -r -e 's/Description:[\t]+//' -e 's/[ ][(](.*)//' -e 's/[ ]/_/g'`

# Run (Homebrew) GNU Utils on OS X
case $OS in
	"Darwin" )
		PATH="/usr/local/opt/coreutils/libexec/gnubin:$PATH"
		MANPATH="/usr/local/opt/coreutils/libexec/gnuman:$MANPATH"
		# Short of learning how to actually configure OSX, here's a hacky way to use
		# GNU manpages for programs that are GNU ones, and fallback to OSX manpages otherwise
		alias man='_() { echo $1; man -M $(brew --prefix)/opt/coreutils/libexec/gnuman $1 1>/dev/null 2>&1;  if [ "$?" -eq 0 ]; then man -M $(brew --prefix)/opt/coreutils/libexec/gnuman $1; else man $1; fi }; _';;
esac

# Dircolors (needs GNUutils) https://github.com/seebi/dircolors-solarized#256dark
# Load the custom .dircolors
if [ -f ~/.dircolors ]; then
	case $OS in
		"Darwin" )
			eval `gdircolors ~/.dircolors`;;
		"Linux"  )
			eval `dircolors -b ~/.dircolors`;;
	esac
fi

# You may need to manually set your language environment
export LANG=en_US.UTF-8

# Lynx local config-file
LYNX_CFG=~/.lynx.cfg; export LYNX_CFG

# Compilation flags
# export ARCHFLAGS="-arch x86_64"

# Ruby GEM paths - local path takes priority over system path
if which ruby >/dev/null && which gem >/dev/null; then
	PATH="$(ruby -rubygems -e 'puts Gem.user_dir')/bin:$PATH"
fi

# Python paths for Linux
case $OS in
	"Linux" )
		# Python paths
		PYTHONPATH=/usr/lib/python2.6/site-packages:$PYTHONPATH
		PYTHONPATH=/usr/lib/python2.7/site-packages:$PYTHONPATH
		PYTHONPATH=/usr/lib/python3.4/site-packages:$PYTHONPATH
		export PYTHONPATH

		# Python PIP local installations
		PATH="$HOME/.local/bin:$PATH"
esac

# GPG
GPG_TTY=$(tty)
export GPG_TTY

# Needed for OS X
case $OS in
	"Darwin" )
		export PINENTRY_USER_DATA="USE_CURSES=1"
esac

# This has been completely removed and made automatic in GnuPG 2.1
# But is still needed for MUTT
export GPG_AGENT_INFO=$HOME/.gnupg/S.gpg-agent

# SSH
export SSH_KEY_PATH="~/.ssh/dsa_id"

# Use secrets file
if [ -e ~/.secrets ]; then
	source ~/.secrets
fi

# Set terminal (for i3)
export TERMINAL=gnome-terminal

# Set editors
export EDITOR=vim
export GIT_EDITOR=vim
export VISUAL=vim

# Prefered editor for local and remote sessions
if [[ -n $SSH_CONNECTION ]]; then
	export EDITOR='vim'
fi

# Usenet server
export NNTPSERVER=news.sunsite.dk

# Set bogus email for anonymous FTP
export EMAIL_ADDR='anonymous@anonymous.org'

# Set 256 colours (supported by ncurses-term)
# Special italic version for Gnome Terminal
# Courtsey of http://www.nerdlyweekly.com/posts/enable-italic-text-vim-tmux-gnome-terminal
case $OS in
	"Linux"  )
		eval `export TERM=xterm-256color-italic`;;
	"Darwin"  )
		eval `export TERM=xterm-256color-italic`;;
esac

# Terminal colors for FreeBSD using TERMINFO
case $OS in
	"FreeBSD"  )
		eval `export TERMINFO=$HOME/.terminfo/terminfo.db`;;
esac

# Colored GCC warnings and errors
export GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01'

# Color definitions for `tldr`
export TLDR_COLOR_BLANK="grey"
export TLDR_COLOR_NAME="cyan"
export TLDR_COLOR_DESCRIPTION="white"
export TLDR_COLOR_EXAMPLE="yellow on_grey bold"
export TLDR_COLOR_COMMAND="yellow"
export TLDR_COLOR_PARAMETER="cyan"

# Editor for `rtv`
export RTV_EDITOR=vim

